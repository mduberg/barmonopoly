import{_,i,m,n as l,q as f,s as w,f as n,g as y,o as d,c,b as e,u as p,v as g,t as x,a as v,F as b,p as S,d as k}from"./index.f4e8a43c.js";const G={name:"CreateGameView",data(){return{error:{show:!1,msg:""},game:{name:"",creator:"",password:""}}},methods:{async createGame(){let s=i().currentUser;if(this.game.name==""||this.game.password=="")this.error.msg="Felaktig inmatning. Kontrollera namn och l\xF6senord.",this.error.show=!0;else{console.log("current user: ",i().currentUser),console.log(this.game);let t=!1;if(console.log("f\xF6rs\xF6ker h\xE4mta data fr\xE5n games"),(await m(l(n,"games"))).forEach(a=>{console.log("pw: ",a.data().password),(a.data().name==this.game.name||a.data().password==this.game.password)&&(t=!0,console.log("similargame true"))}),t)this.error.msg="Spelnamnet eller l\xF6senordet \xE4r upptaget, f\xF6rs\xF6k igen.",this.error.show=!0;else{const a=await f(l(n,"games"),{name:this.game.name,creator:this.game.creator,password:this.game.password,t1score:0,t2score:0,t1position:0,t2position:0,t1card:!1,t2card:!1,active:!1,endDate:"",ended:!1});await m(l(n,"users"));const r=w(n,"users",s.uid);await y(r,{inGame:a.id}),this.$router.push("/gamelounge/"+a.id)}}}},mounted(){this.game.creator=i().currentUser.displayName,console.log("creator is: ",this.game.creator)}},u=s=>(S("data-v-083090b6"),s=s(),k(),s),F={class:"createGameContent"},V={style:{"text-align":"left",width:"90%",margin:"0 auto"}},C={style:{"margin-top":"20px"}},U=u(()=>e("label",{style:{"margin-bottom":"-2px"},for:"gameNameField"},"Spelets namn:",-1)),N={style:{"margin-top":"36px"}},B=u(()=>e("label",{style:{"margin-bottom":"-2px"},for:"gamePWField"},"L\xF6senord f\xF6r att ansluta:",-1)),I={style:{"text-align":"center","margin-top":"36px"}},D={key:0,style:{"text-align":"center",width:"400px",margin:"40px auto"},class:"alert alert-primary",role:"alert"};function E(s,t,h,a,r,P){return d(),c(b,null,[e("div",F,[e("div",V,[e("div",C,[U,p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.game.name=o),type:"text",id:"gameNameField",class:"form-control"},null,512),[[g,r.game.name]])]),e("div",N,[B,p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.game.password=o),type:"text",id:"gamePWField",class:"form-control"},null,512),[[g,r.game.password]])]),e("div",I,[e("button",{onClick:t[2]||(t[2]=o=>this.createGame()),id:"createButton",class:"btn btn-primary"},"Skapa")])])]),this.error.show?(d(),c("div",D,x(this.error.msg),1)):v("",!0)],64)}const R=_(G,[["render",E],["__scopeId","data-v-083090b6"]]);export{R as default};
