import{_ as c,i as u,m as w,n as f,y as _,z as y,A as x,s as v,f as g,o as i,c as a,b as e,a as p,u as l,v as m,t as F,F as k}from"./index.f4e8a43c.js";const b={name:"RegisterView",data(){return{registerForm:{username:"",email:"",password:""},error:{show:!1,msg:""},showSpinner:!1}},methods:{async registerNewUser(){this.showSpinner=!0,this.error.show=!1;const d=u();this.registerForm.username==""&&(this.showSpinner=!1,this.error.msg="Ange ett anv\xE4ndarnamn.",this.error.show=!0),(await w(f(g,"users"))).forEach(t=>{if(console.log(t.id," => ",t.data().username),this.registerForm.username==t.data().username){this.showSpinner=!1,console.log("hittade en otill\xE5ten matching"),this.error.msg="Anv\xE4ndarnamnet \xE4r upptaget. V\xE4lj ett annat och f\xF6rs\xF6k igen.",this.error.show=!0;return}}),_(d,this.registerForm.email,this.registerForm.password).then(async t=>{const o=t.user;console.log("registered ",o);const s=u();y(s.currentUser,{displayName:this.registerForm.username,tenantId:-1}).then(()=>{this.showSpinner=!1,console.log("added a username to firebase auth users"),this.$router.push("/home")}).catch(h=>{this.showSpinner=!1,console.log("an error occcured",h)}),await x(v(g,"users",o.uid),{username:this.registerForm.username,team:-1,inGame:""})}).catch(t=>{this.showSpinner=!1;const o=t.code,s=t.message;console.log(o),console.log(s),o=="auth/invalid-email"?(this.error.msg="Ogiltig emailadress",this.error.show=!0):o=="auth/user-not-found"?(this.error.msg="Ingen s\xE5dan anv\xE4ndare hittades. Kontrollera emailadressen eller registrera ett nytt konto.",this.error.show=!0):o=="auth/wrong-password"?(this.error.msg="Felaktigt l\xF6senord.",this.error.show=!0):(this.error.msg="Felaktigt l\xF6sernord eller emailadress.",this.error.show=!0)})}}},S={class:"registerContent"},V={key:0,style:{position:"fixed","z-index":"4","font-size":"22px",height:"70px",width:"70px",left:"calc(50vw - 35px)",top:"calc(50vh - 90px)"},class:"spinner-border",role:"status"},U=e("span",{class:"sr-only"},"Loading...",-1),A=[U],N={style:{"text-align":"left",width:"90%",margin:"0 auto"}},C={style:{"margin-top":"30px"}},E={style:{"margin-top":"22px"}},R={style:{"margin-top":"22px"}},z={style:{"text-align":"center","margin-top":"25px"}},B={key:0,style:{"text-align":"center","margin-top":"40px"},class:"alert alert-primary",role:"alert"};function I(d,r,t,o,s,h){return i(),a(k,null,[e("div",S,[this.showSpinner?(i(),a("div",V,A)):p("",!0),e("div",N,[e("div",C,[l(e("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>s.registerForm.username=n),type:"text",class:"form-control",placeholder:"Anv\xE4ndarnamn"},null,512),[[m,s.registerForm.username]])]),e("div",E,[l(e("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>s.registerForm.email=n),type:"email",class:"form-control",placeholder:"Email"},null,512),[[m,s.registerForm.email]])]),e("div",R,[l(e("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>s.registerForm.password=n),type:"password",class:"form-control",id:"exampleInputPassword1",placeholder:"L\xF6senord"},null,512),[[m,s.registerForm.password]])]),e("div",z,[e("button",{onClick:r[3]||(r[3]=n=>this.registerNewUser()),style:{"background-color":"rgb(27, 0, 182)"},class:"btn btn-primary"},"Registrera")])])]),this.error.show?(i(),a("div",B,F(this.error.msg),1)):p("",!0)],64)}const D=c(b,[["render",I]]);export{D as default};
